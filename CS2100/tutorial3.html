<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-UK" xml:lang="en-UK">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />

  <meta name="author" content="Qi Ji" />


  <meta name="dcterms.date" content="Week 5" />

  <title>CS2100 Tutorial 3</title>
  <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
      q { quotes: "“" "”" "‘" "’"; }
  </style>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Inconsolata|PT+Sans|PT+Sans+Narrow:700">
  <link rel="stylesheet" href="../css/pandoc.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>
</head>
<body>
<main role="main">
<h1 class="title">CS2100 Tutorial 3</h1>
<article>
<header>


<p class="author">Qi Ji</p>


<p class="date">Week 5</p>

</header>

<h1 id="d1" class="unnumbered">D1</h1>
<ol type="a">
<li><p>register <code>$t1</code> maintains a pointer to current element in array <em>B</em>.</p></li>
<li><p><span class="math inline">\(A = \left\{\, 3,4,1,2,0,5,9,0 \,\right\}\)</span> and <span class="math inline">\(B = \left\{\, 7,4,5,6,1,0,0,9 \,\right\}\)</span></p></li>
<li><p>2 swaps, so 4 store words.</p></li>
<li><p><code>-9</code>?</p></li>
<li><p><code>bge  $t4, $t3, skip</code></p></li>
</ol>
<h1 id="palindrome"><span class="header-section-number">1</span> Palindrome</h1>
<h2 id="using-indices"><span class="header-section-number">1.1</span> using indices</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource mips numberLines"><code class="sourceCode mips"><a class="sourceLine" id="cb1-1" title="1">        <span class="fu">li</span>      <span class="dt">$s0</span>, <span class="dv">0</span>          <span class="co"># low = 0</span></a>
<a class="sourceLine" id="cb1-2" title="2">        <span class="kw">sub</span>     <span class="dt">$s1</span>, <span class="dt">$s5</span>, <span class="dv">1</span>     <span class="co"># high = size - 1</span></a>
<a class="sourceLine" id="cb1-3" title="3">        <span class="fu">li</span>      <span class="dt">$s3</span>, <span class="dv">1</span>          <span class="co"># matched = 1</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="ot">loop:</span>   <span class="fu">bge</span>     <span class="dt">$s1</span>, <span class="dt">$s0</span>, end   <span class="co"># if (low &gt;= high) goto end</span></a>
<a class="sourceLine" id="cb1-5" title="5">        <span class="kw">beq</span>     <span class="dt">$s3</span>, <span class="dt">$zero</span>, end <span class="co"># if (!matched) goto end</span></a>
<a class="sourceLine" id="cb1-6" title="6">        <span class="kw">sll</span>     <span class="dt">$t0</span>, <span class="dt">$s0</span>, <span class="dv">2</span>     <span class="co"># low * 4</span></a>
<a class="sourceLine" id="cb1-7" title="7">        <span class="kw">add</span>     <span class="dt">$t1</span>, <span class="dt">$s4</span>, <span class="dt">$t0</span>   <span class="co"># &amp;string[low]</span></a>
<a class="sourceLine" id="cb1-8" title="8">        <span class="kw">lw</span>      <span class="dt">$t2</span>, <span class="dv">0</span>(<span class="dt">$t1</span>)     <span class="co"># $t2 &lt;- string[low]</span></a>
<a class="sourceLine" id="cb1-9" title="9">        <span class="kw">sll</span>     <span class="dt">$t3</span>, <span class="dt">$s1</span>, <span class="dv">2</span>     <span class="co"># high * 4  ($t4 reused)</span></a>
<a class="sourceLine" id="cb1-10" title="10">        <span class="kw">add</span>     <span class="dt">$t4</span>, <span class="dt">$s4</span>, <span class="dt">$t3</span>   <span class="co"># &amp;string[high]</span></a>
<a class="sourceLine" id="cb1-11" title="11">        <span class="kw">lw</span>      <span class="dt">$t5</span>, <span class="dv">0</span>(<span class="dt">$t4</span>)     <span class="co"># $t5 &lt;- string[high]</span></a>
<a class="sourceLine" id="cb1-12" title="12">        <span class="kw">beq</span>     <span class="dt">$t2</span>, <span class="dt">$t5</span>, else  <span class="co"># if (string[low] == string[high]) goto else</span></a>
<a class="sourceLine" id="cb1-13" title="13">        <span class="fu">li</span>      <span class="dt">$s3</span>, <span class="dv">0</span>          <span class="co"># matched = 0</span></a>
<a class="sourceLine" id="cb1-14" title="14"><span class="ot">else:</span>   <span class="kw">addi</span>    <span class="dt">$s0</span>, <span class="dt">$s0</span>, <span class="dv">1</span>     <span class="co"># low++</span></a>
<a class="sourceLine" id="cb1-15" title="15">        <span class="kw">addi</span>    <span class="dt">$s1</span>, <span class="dt">$s1</span>, <span class="dv">-1</span>    <span class="co"># high--</span></a>
<a class="sourceLine" id="cb1-16" title="16">        <span class="kw">j</span>       loop</a>
<a class="sourceLine" id="cb1-17" title="17"><span class="ot">end:</span></a></code></pre></div>
<h2 id="using-pointers-like-you-should"><span class="header-section-number">1.2</span> using pointers (like you should)</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource mips numberLines"><code class="sourceCode mips"><a class="sourceLine" id="cb2-1" title="1">        <span class="fu">li</span>      <span class="dt">$s0</span>, <span class="dt">$s4</span>        <span class="co"># low = &amp;string[0]</span></a>
<a class="sourceLine" id="cb2-2" title="2">        <span class="kw">addi</span>    <span class="dt">$s1</span>, <span class="dt">$s5</span>, <span class="dv">-1</span>    <span class="co"># size - 1</span></a>
<a class="sourceLine" id="cb2-3" title="3">        <span class="kw">sll</span>     <span class="dt">$s1</span>, <span class="dt">$s1</span>, <span class="dv">2</span>     <span class="co"># (size - 1) * 4</span></a>
<a class="sourceLine" id="cb2-4" title="4">        <span class="kw">add</span>     <span class="dt">$s1</span>, <span class="dt">$s1</span>, <span class="dt">$s4</span>   <span class="co"># high = low + (size-1)*4</span></a>
<a class="sourceLine" id="cb2-5" title="5">        <span class="fu">li</span>      <span class="dt">$s3</span>, <span class="dv">1</span>          <span class="co"># matched = 1</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="ot">loop:</span>   <span class="fu">bge</span>     <span class="dt">$s1</span>, <span class="dt">$s0</span>, end   <span class="co"># if (low &gt;= high) goto end</span></a>
<a class="sourceLine" id="cb2-7" title="7">        <span class="kw">beq</span>     <span class="dt">$s3</span>, <span class="dt">$zero</span>, end <span class="co"># if (!matched) goto end</span></a>
<a class="sourceLine" id="cb2-8" title="8">        <span class="kw">lw</span>      <span class="dt">$t0</span>, <span class="dv">0</span>(<span class="dt">$s0</span>)     <span class="co"># $t0 &lt;- *low</span></a>
<a class="sourceLine" id="cb2-9" title="9">        <span class="kw">lw</span>      <span class="dt">$t1</span>, <span class="dv">0</span>(<span class="dt">$s1</span>)     <span class="co"># $t1 &lt;- *high</span></a>
<a class="sourceLine" id="cb2-10" title="10">        <span class="kw">beq</span>     <span class="dt">$t0</span>, <span class="dt">$t1</span>, else  <span class="co"># if (*low == *high) goto else</span></a>
<a class="sourceLine" id="cb2-11" title="11">        <span class="fu">li</span>      <span class="dt">$s3</span>, <span class="dv">0</span>          <span class="co"># matched = 0</span></a>
<a class="sourceLine" id="cb2-12" title="12"><span class="ot">else:</span>   <span class="kw">addi</span>    <span class="dt">$s0</span>, <span class="dt">$s0</span>, <span class="dv">4</span>     <span class="co"># low++</span></a>
<a class="sourceLine" id="cb2-13" title="13">        <span class="kw">addi</span>    <span class="dt">$s1</span>, <span class="dt">$s1</span>, <span class="dv">-4</span>    <span class="co"># high--</span></a>
<a class="sourceLine" id="cb2-14" title="14">        <span class="kw">j</span>       loop</a>
<a class="sourceLine" id="cb2-15" title="15"><span class="ot">end:</span></a></code></pre></div>
<h1 id="coffee-spill"><span class="header-section-number">2</span> Coffee spill</h1>
<ul>
<li><code>addi $s1, $zero, 0</code>
<ul>
<li>opcode is <code>0x8</code></li>
<li>rt is <code>$s1 = $17</code></li>
<li>rs is <code>$zero = $0</code></li>
<li>immediate is <code>0</code></li>
<li>the instruction is <code>001000 00000 10001 0000000000000000</code></li>
<li>in hex it’s <code>0x20110000</code></li>
</ul></li>
<li><code>0x11000002</code>
<ul>
<li>binary is <code>000100 01000 00000 0000000000000010</code></li>
<li>opcode is <code>4</code> for <code>beq</code></li>
<li>rs is <code>8</code> for <code>$t0</code></li>
<li>rt is <code>0</code> for <code>$zero</code></li>
<li>immediate is <code>2</code> so we’re jumping to exit</li>
<li>so <code>beq   $t0, $zero, exit</code></li>
</ul></li>
<li><code>0x22310001</code>
<ul>
<li>binary is <code>001000 10001 10001 0000000000000001</code></li>
<li>opcode is <code>0x8</code> for <code>addi</code></li>
<li>rs and rt are both <code>$s1</code></li>
<li>immediate has <code>1</code></li>
<li>so we have <code>addi  $s1, $s1, 1</code></li>
</ul></li>
<li><code>j loop</code>
<ul>
<li>opcode for <code>j</code> is <code>0x2</code></li>
<li>jumpaddr is <code>0x0040002C</code> ?</li>
<li>in binary we have <code>000010 00000100000000000000001011</code></li>
<li>in hex it’s <code>0x0810000B</code></li>
</ul></li>
</ul>
<h1 id="binary-search-looking-down-on-cs1020"><span class="header-section-number">3</span> Binary search (looking down on CS1020)</h1>
<h2 id="a.-fill-in-the-blanks" class="unnumbered">a. Fill in the blanks</h2>
<p><strong>Variable mappings.</strong></p>
<p><span class="math display">\[\begin{align*}
    \texttt{array} &amp;\to $s0 \\
    \texttt{target} &amp;\to $s1 \\
    \texttt{low} &amp;\to $s2 \\ 
    \texttt{high} &amp;\to $s3 \\ 
    \texttt{mid} &amp;\to $s4 \\ 
    \texttt{ans} &amp;\to $s5 \\ 
\end{align*}\]</span></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource mips numberLines"><code class="sourceCode mips"><a class="sourceLine" id="cb3-1" title="1"><span class="ot">loop:</span></a>
<a class="sourceLine" id="cb3-2" title="2">    <span class="kw">slt</span> <span class="dt">$t9</span>, <span class="dt">$s3</span>, <span class="dt">$s2</span></a>
<a class="sourceLine" id="cb3-3" title="3">    <span class="kw">bne</span> <span class="dt">$t9</span>, <span class="dt">$zero</span>, end     <span class="co">#   while (low &lt;= high) {</span></a>
<a class="sourceLine" id="cb3-4" title="4">    <span class="kw">add</span> <span class="dt">$s4</span>, <span class="dt">$s2</span>, <span class="dt">$s3</span>       <span class="co">#       mid = low + high;</span></a>
<a class="sourceLine" id="cb3-5" title="5">    <span class="kw">srl</span> <span class="dt">$s4</span>, <span class="dv">1</span>              <span class="co">#       mid /= 2;</span></a>
<a class="sourceLine" id="cb3-6" title="6">    <span class="kw">sll</span> <span class="dt">$t0</span>, <span class="dt">$t4</span>, <span class="dv">2</span>         <span class="co">#       t0 = mid * 4;</span></a>
<a class="sourceLine" id="cb3-7" title="7">    <span class="kw">add</span> <span class="dt">$t0</span>, <span class="dt">$s0</span>, <span class="dt">$t0</span>       <span class="co">#       t0 = &amp;array[mid];</span></a>
<a class="sourceLine" id="cb3-8" title="8">    <span class="kw">lw</span>  <span class="dt">$t1</span>, <span class="dv">0</span>(<span class="dt">$t0</span>)         <span class="co">#       t1 = array[mid];</span></a>
<a class="sourceLine" id="cb3-9" title="9">    <span class="kw">slt</span> <span class="dt">$t9</span>, <span class="dt">$s1</span>, <span class="dt">$t1</span>       <span class="co">#       if (target &lt; array[mid])</span></a>
<a class="sourceLine" id="cb3-10" title="10">    <span class="kw">beq</span> <span class="dt">$t9</span>, <span class="dt">$zero</span>, bigger</a>
<a class="sourceLine" id="cb3-11" title="11">    <span class="kw">addi</span> <span class="dt">$s3</span>, <span class="dt">$s4</span>, <span class="dv">-1</span>       <span class="co">#           high = mid - 1;</span></a>
<a class="sourceLine" id="cb3-12" title="12">    <span class="kw">j</span> loopEnd</a>
<a class="sourceLine" id="cb3-13" title="13"><span class="ot">bigger:</span></a>
<a class="sourceLine" id="cb3-14" title="14">    <span class="kw">slt</span> <span class="dt">$t9</span>, <span class="dt">$t1</span>, <span class="dt">$s1</span>       <span class="co">#       else if (target &gt; array[mid])</span></a>
<a class="sourceLine" id="cb3-15" title="15">    <span class="kw">beq</span> <span class="dt">$t9</span>, <span class="dt">$zero</span>, equal</a>
<a class="sourceLine" id="cb3-16" title="16">    <span class="kw">addi</span> <span class="dt">$s2</span>, <span class="dt">$s4</span>, <span class="dv">1</span>        <span class="co">#           low = mid + 1;</span></a>
<a class="sourceLine" id="cb3-17" title="17"><span class="ot">equal:</span>                      <span class="co">#       else {</span></a>
<a class="sourceLine" id="cb3-18" title="18">    <span class="kw">add</span> <span class="dt">$s5</span>, <span class="dt">$s4</span>, <span class="dt">$zero</span>     <span class="co">#           ans = mid;</span></a>
<a class="sourceLine" id="cb3-19" title="19">    <span class="kw">j</span> end                   <span class="co">#           break;</span></a>
<a class="sourceLine" id="cb3-20" title="20">                            <span class="co">#       }</span></a>
<a class="sourceLine" id="cb3-21" title="21"><span class="ot">loopEnd:</span></a>
<a class="sourceLine" id="cb3-22" title="22">    <span class="kw">j</span> loop                  <span class="co">#   }</span></a>
<a class="sourceLine" id="cb3-23" title="23"><span class="ot">end:</span></a></code></pre></div>
<ol start="2" type="a">
<li><p>lazy</p></li>
<li><p>lazy</p></li>
</ol>
</article>
</main>
</body>
</html>
